---
title: "Reactã¯çŠ¶æ…‹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "javascript"]
published: true
---

[React Docs](https://beta.reactjs.org)ã‚’çœºã‚ã¦ã„ã‚‹ã¨æ™‚æŠ˜ *snapshotï¼ˆã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼‰* ã¨ã„ã†å˜èªãŒç™»å ´ã—ã¾ã™ã€‚[State as a Snapshot](https://beta.reactjs.org/learn/state-as-a-snapshot)ã§ã¯ã€*state behaves more like a snapshotï¼ˆçŠ¶æ…‹ã¯ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã®ã‚ˆã†ã«æŒ¯ã‚‹èˆã†ï¼‰* ã¨è¨˜è¿°ãŒã‚ã‚Šã¾ã™ãŒã€åˆã‚ã¦èª­ã‚“ã æ™‚ã¯å°‘ã—ç†è§£ã«æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã—ãŸã€‚æœ¬è¨˜äº‹ã§ã¯ã“ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã„ã†è¨€è‘‰ã«ã¤ã„ã¦è€ƒãˆã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

# æœ¬è¨˜äº‹ã®å¯¾è±¡è€…

- Reactã®åˆå­¦è€…
- [State as a Snapshot](https://beta.reactjs.org/learn/state-as-a-snapshot)ã‚’èª­ã‚“ã ã“ã¨ãªã„ / èª­ã‚“ã ã“ã¨ã¯ã‚ã‚‹ãŒç†è§£ã—ãã‚Œã¦ã„ãªã„äºº
- æœ¬è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã®æ„å‘³ãŒã‚ˆãã‚ã‹ã‚‰ãªã„äºº

# æœ¬è¨˜äº‹ã®ç›®çš„

- Reactã«ãŠã‘ã‚‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã¯ä½•ã‹ã‚’ç†è§£ã™ã‚‹
- ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã—ã¦ã®çŠ¶æ…‹ã¨ã¯ä½•ã‹ã‚’ç†è§£ã™ã‚‹
- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨çŠ¶æ…‹ã®é–¢ä¿‚ã«ã¤ã„ã¦æŠŠæ¡ã™ã‚‹

# çµè«–

- Reactã«ãŠã‘ã‚‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã„ã†åã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨
- åŒä¸€ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ã¯çŠ¶æ…‹ãŒå›ºå®šã•ã‚Œã‚‹
- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ã¯çŠ¶æ…‹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’å‚ç…§ã—ã¦ã„ã‚‹

# Reactã«ãŠã‘ã‚‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã¯

æœ¬è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã§ã‚ã‚‹ã€ŒReactã¯çŠ¶æ…‹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã€ã¨ã„ã†è¨€è‘‰ã‚’ç´è§£ããŸã‚ã«ã¯ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã„ã†2ã¤ã®å˜èªã«ã¤ã„ã¦è€ƒãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¸€æ—¦ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã«ã¤ã„ã¦ã¯ç½®ã„ã¦ãŠãã¨ã—ã¦ã€ã¾ãšã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®æ„å‘³ã‹ã‚‰è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚

>  â€œRenderingâ€ is React calling your components.
> å‡ºå…¸: [Render and Commit â€¢ React - Step 2: React renders your components](https://beta.reactjs.org/learn/render-and-commit#step-2-react-renders-your-components)

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚‚ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã„ã†å˜èªã«å¯¾ã™ã‚‹è¨€åŠã¯ã„ãã¤ã‹ã‚ã‚Šã¾ã™ãŒã€ä¸Šè¨˜ã«ã‚ˆã‚‹ã¨Reactã«ãŠã‘ã‚‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‘¼ã³å‡ºã—ã®ã“ã¨ã‚’æŒ‡ã—ã¦ã„ã¾ã™ã€‚ã§ã¯æ¬¡ã«ç–‘å•ã¨ãªã‚‹ã®ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã¯ä½•ã‹ã€ã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã€‚

> a React component is a JavaScript function that you can sprinkle with markup.
> å‡ºå…¸: [Your First Component â€¢ React - Defining a component](https://beta.reactjs.org/learn/your-first-component#defining-a-component)

ã“ã“ã§ã„ã†Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯JavaScriptã®é–¢æ•°ã®ã“ã¨ã§ã™ã€‚ã¤ã¾ã‚Š**Reactã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã„ã†åã®JavaScriptã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨**ã‚’æ„å‘³ã—ã¾ã™ï¼ˆã“ã®çµæœã¨ã—ã¦JSXãŒè¿”ã£ã¦ãã¾ã™ï¼‰ã€‚

å‹˜é•ã„ã—ãŒã¡ã§ã™ãŒã€Reactã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®æç”»ã¨ã¯ç•°ãªã‚‹ã“ã¨ã«æ°—ã‚’ä»˜ã‘ã¦ãã ã•ã„ã€‚Reactã§ã¯ã€ã“ã‚Œã‚‰ã‚’åŒºåˆ¥ã™ã‚‹ãŸã‚ã«ãƒ–ãƒ©ã‚¦ã‚¶ã®æç”»ã®ã“ã¨ã‚’ãƒšã‚¤ãƒ³ãƒˆã¨å‘¼ã‚“ã§ã„ã¾ã™ã€‚æ¬¡ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ãƒšã‚¤ãƒ³ãƒˆã®æµã‚Œã‚’ç°¡å˜ã«ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

# ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒ–ãƒ©ã‚¦ã‚¶ã«è¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§

> 1.Triggering a render (delivering the guestâ€™s order to the kitchen)
> 2.Rendering the component (preparing the order in the kitchen)
> 3.Committing to the DOM (placing the order on the table)
> å‡ºå…¸: [Your First Component â€¢ React](https://beta.reactjs.org/learn/render-and-commit)

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã€ReactãŒã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«è¡¨ç¤ºã™ã‚‹ã¾ã§ã«ã¯ã€æ¬¡ã®3ã¤ã®æ‰‹é †ã‚’è¸ã¿ã¾ã™ã€‚

1. ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ãƒˆãƒªã‚¬ãƒ¼
2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
3. DOMã¸ã®ã‚³ãƒŸãƒƒãƒˆ

ä¸Šè¨˜ã®3ã¤ã®æ‰‹é †ã‚’è¸ã‚“ã å¾Œã€æœ€çµ‚çš„ã«ãƒ–ãƒ©ã‚¦ã‚¶ã«æç”»ï¼ˆãƒšã‚¤ãƒ³ãƒˆï¼‰ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

## 1.ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ãƒˆãƒªã‚¬ãƒ¼

ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ãƒˆãƒªã‚¬ãƒ¼ã«ã¯æ¬¡ã®2ã¤ãŒå­˜åœ¨ã—ã¾ã™ã€‚

- åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆã¾ãŸã¯ãã®ç¥–å…ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰ã®çŠ¶æ…‹æ›´æ–°

### åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã¯ã‚¢ãƒ—ãƒªã®èµ·å‹•æ™‚ã«ãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã‚‹ã‚‚ã®ã§ã™ã€‚[`createRoot`](https://beta.reactjs.org/reference/react-dom/client/createRoot)ã¨ãã®`renderãƒ¡ã‚½ãƒƒãƒ‰`ã‚’å‘¼ã³å‡ºã™ã“ã¨ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®DOMè¦ç´ å†…ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®Reactãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

```tsx
import { createRoot } from 'react-dom/client';
import App from './App.js';

const root = createRoot(document.getElementById('root'));
root.render(<App />);
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆã¾ãŸã¯ãã®ç¥–å…ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰ã®çŠ¶æ…‹æ›´æ–°

åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å¾Œã¯ã€[`seté–¢æ•°`](https://beta.reactjs.org/reference/react/useState#setstate)ã§çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€æ¬¡ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ãƒˆãƒªã‚¬ãƒ¼ã§ãã¾ã™ã€‚

```tsx
const Counter = () => {
  const [count, setCount] = useState(0);
  // setCountã§çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ãƒˆãƒªã‚¬ãƒ¼ã™ã‚‹
  return <button onClick={() => setCount(count + 1)}>count: {count}</button>;
};
```

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ãŸã³ã«`setCount`ãŒå®Ÿè¡Œã•ã‚Œã€æ¬¡ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ãƒˆãƒªã‚¬ãƒ¼ã—ã¦ã„ã¾ã™ã€‚

## 2.ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã‚‹ã¨ã€æ¬¡ã«Reactã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’è¡Œã„ã¾ã™ï¼ˆã¤ã¾ã‚Šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã¾ã™ï¼‰ã€‚åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ã¯ã€Reactã¯ãƒ«ãƒ¼ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã€å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ã¯ã€Reactã¯çŠ¶æ…‹æ›´æ–°ãŒç”Ÿã˜ãŸé–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

:::details å†å¸°çš„ãªãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ—ãƒ­ã‚»ã‚¹
ã“ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ—ãƒ­ã‚»ã‚¹ã¯å†å¸°çš„ã§ã™ã€‚ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒç”Ÿã˜ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä»–ã®å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å«ã‚€ã¨ãã€ãã®å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚åŒæ§˜ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚ã“ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®é€£é–ã¯ãƒã‚¹ãƒˆã•ã‚ŒãŸå­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãªããªã‚‹ã¾ã§ç¶šãã¾ã™ã€‚

ã“ã‚Œã¯æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã§`ParentComponent`ãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã¨`ChildComponent`ã‚‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚

```tsx
// ParentComponentãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã¨ChildComponentã‚‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹
const ChildComponent = () => {
  return <p>ChildComponent</p>;
};

const ParentComponent = () => {
  const [count, setCount] = useState(0);
  return (
    <div>
      <ChildComponent />
      <button onClick={() => setCount(count + 1)}>count: {count}</button>
    </div>
  );
};
```
:::

## 3.DOMã¸ã®ã‚³ãƒŸãƒƒãƒˆ

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’çµ‚ãˆã‚‹ã¨ã€Reactã¯DOMã‚’å¤‰æ›´ã—ã¾ã™ã€‚åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ã¯ã€`appendChild()`ã‚’ä½¿ç”¨ã—ã¦ã€ä½œæˆã—ãŸã™ã¹ã¦ã®DOMãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ã¯ã€DOMã‚’æœ€æ–°ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å‡ºåŠ›çµæœã¨ä¸€è‡´ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚ã“ã®æ™‚ã€å‰å›ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœã¨ã®é–“ã§å·®ç•°ãŒã‚ã£ãŸDOMãƒãƒ¼ãƒ‰ã®ã¿ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

:::details ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–“ã§å·®ç•°ãŒã‚ã£ãŸDOMãƒãƒ¼ãƒ‰ã®ã¿ã‚’å¤‰æ›´ã™ã‚‹

ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–“ã§å·®ç•°ãŒã‚ã£ãŸDOMãƒãƒ¼ãƒ‰ã®ã¿ã‚’å¤‰æ›´ã™ã‚‹ã¨ã¯ã©ã†ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã‹ã€‚ãŸã¨ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ãŒã‚ã£ãŸã¨ã—ã¾ã™ã€‚

```tsx
const Counter = () => {
  const [count, setCount] = useState(0);
  return (
    <>
      {/* buttonã®ã‚¯ãƒªãƒƒã‚¯ã”ã¨ã«countãŒæ›´æ–°ã•ã‚Œã‚‹ */}
      <button
        onClick={() => {
          setCount(count + 1);
        }}
      >
        count: {count}
      </button>
      {/* buttonã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚inputã®ãƒ†ã‚­ã‚¹ãƒˆã¯ãƒªã‚»ãƒƒãƒˆã•ã‚Œãªã„ */}
      <input type="text" />
    </>
  );
};
```

@[codesandbox](https://codesandbox.io/embed/react-snapshot-input-zox65w?fontsize=14&hidenavigation=1&theme=dark)

ä¸Šè¨˜ã§ã¯`button`ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨`Counter`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚ãã®çµæœ`button`ã®ãƒ†ã‚­ã‚¹ãƒˆã¯ã‚¯ãƒªãƒƒã‚¯ã”ã¨ã«å¤‰æ›´ã•ã‚Œã¾ã™ãŒã€`input`ã«å…¥åŠ›ã—ãŸæ–‡å­—ã¯ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã›ã‚“ã€‚ã“ã‚Œã¯ä¸€ä½“ãªãœã§ã—ã‚‡ã†ã‹ã€‚

ã“ã“ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã„ã†è¨€è‘‰ã®æ„å‘³ã‚’æ€ã„å‡ºã—ã¦ãã ã•ã„ã€‚ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã„ã†åã®JavaScriptã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨ã§ã—ãŸã€‚é–¢æ•°ã‚’å‘¼ã³å‡ºã—ãŸçµæœã€JSXã‚’å–å¾—ã™ã‚‹ã®ã§ã™ãŒã€ã‚ˆãã‚ˆãè¦‹è¿”ã—ã¦ã¿ã‚‹ã¨JSXä¸Šã®`input`ï¼ˆã¨ãã®`value`ï¼‰ã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°é–“ã§åŒç­‰ã§ã™ã€‚ã—ãŸãŒã£ã¦Reactã¯`input`ã«å¤‰æ›´ã‚’åŠ ãˆã¾ã›ã‚“ã€‚

ã§ã¯`button`ã®ã‚¯ãƒªãƒƒã‚¯ã”ã¨ã«`input`ã®DOMãƒãƒ¼ãƒ‰ã‚‚å¤‰æ›´ã—ãŸã„ï¼ˆ`input`ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸã„ï¼‰æ™‚ã¯ã©ã†ã™ã‚Œã°ã„ã„ã§ã—ã‚‡ã†ã‹ã€‚Reactã§ã¯`key`å±æ€§ã‚’ä½¿ã£ã¦ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```tsx
const Counter = () => {
  const [count, setCount] = useState(0);
  return (
    <>
      {/* buttonã®ã‚¯ãƒªãƒƒã‚¯ã”ã¨ã«countãŒæ›´æ–°ã•ã‚Œã‚‹ */}
      <button
        onClick={() => {
          setCount(count + 1);
        }}
      >
        count: {count}
      </button>
      {/* keyãŒå¤‰æ›´ã•ã‚Œã‚‹ã“ã¨ã§inputãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ */}
      <input type="text" key={count}/>
    </>
  );
};
```

@[codesandbox](https://codesandbox.io/embed/react-snapshot-input-reset-lmmd6s?fontsize=14&hidenavigation=1&theme=dark)

:::

:::message
ReactãŒDOMã‚’æ›´æ–°ã—ãŸå¾Œã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã¯ç”»é¢ã‚’å†æç”»ã—ã¾ã™ã€‚ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ã®æç”»ã®ã“ã¨ã‚’ã€ä¸€èˆ¬çš„ã«ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨å‘¼ã³ã¾ã™ãŒã€Reactï¼ˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰ã§ã¯æ··ä¹±ã‚’é¿ã‘ã‚‹ãŸã‚ã«ãƒšã‚¤ãƒ³ãƒˆã¨å‘¼ã‚“ã§ã„ã¾ã™ã€‚
:::

# Reactã¯çŠ¶æ…‹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹

ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã«ã¤ã„ã¦ç¢ºèªã—ãŸã¨ã“ã‚ã§ã€æ¬¡ã¯ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã«ã¤ã„ã¦è€ƒãˆã¦ã¿ã¾ã™ã€‚ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã„ã†å˜èªã¯ã€ã•ã¾ã–ã¾ãªåˆ†é‡ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ãŒã€ã‚ã‚‹æ™‚ç‚¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãã®ã¾ã¾ä¿å­˜ã—ãŸãƒ¢ãƒã¨ã„ã†æ„å‘³ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã‚Œã‚’Reactã«å½“ã¦ã¯ã‚ã¦ã¿ã‚‹ã¨ã€ã€Œã‚ã‚‹æ™‚ç‚¹ã€ã¯ã€Œã‚ã‚‹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®æ™‚ç‚¹ã€ã«ã€ã€Œãƒ‡ãƒ¼ã‚¿ã€ã¯ã€ŒçŠ¶æ…‹ã€ã«ç½®ãæ›ãˆã¦è€ƒãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‘¼ã³å‡ºã™ã“ã¨ï¼ˆå‘¼ã³å‡ºã—ã¦JSXã‚’å–å¾—ã™ã‚‹ã“ã¨ï¼‰ã§ã—ãŸã€‚çŠ¶æ…‹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã¨ã„ã†ã“ã¨ã¯ã€ã™ãªã‚ã¡**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå‘¼ã³å‡ºã•ã‚ŒãŸæ™‚ç‚¹ã®çŠ¶æ…‹ã‚’ã‚‚ã¨ã«è¨ˆç®—ã•ã‚Œã‚‹**ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã“ã‚Œã¯åŒä¸€ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å†…ã«ãŠã„ã¦ã€çŠ¶æ…‹ã¯å›ºå®šã•ã‚Œã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

ãŸã¨ãˆã°æ¬¡ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ãã®æŒ™å‹•ã‚’ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```tsx
const Counter = () => {
  const [count, setCount] = useState(0)
  const handleClick = () => {
    setCount(count + 1);
    setCount(count + 1);
    setCount(count + 1);
  }
  return (
    <button onClick={handleClick}>count: {count}</button>
  )
}
```

@[codesandbox](https://codesandbox.io/embed/react-snapshot-increment-1-f4s9q1?fontsize=14&hidenavigation=1&theme=dark)

ä¸Šè¨˜ã§ã¯ã€1åº¦ã®`button`ã®ã‚¯ãƒªãƒƒã‚¯ã«ã¤ã`count`ãŒ1ãšã¤å¢—åŠ ã—ã¾ã™ï¼ˆ3ãšã¤ã¯å¢—åŠ ã—ã¾ã›ã‚“ï¼‰ã€‚ä»¥ä¸‹ã¯åˆå›ã®`button`ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‹•ãã‚’å¯è¦–åŒ–ã—ãŸã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚

```tsx
// countã¯å¸¸ã«0
const handleClick = () => {
  setCount(0 + 1);
  setCount(0 + 1);
  setCount(0 + 1);
}
```

> React waits until all code in the event handlers has run before processing your state updates.
> å‡ºå…¸: [Queueing a Series of State Updates â€¢ React - React batches state updates](https://beta.reactjs.org/learn/queueing-a-series-of-state-updates#react-batches-state-updates)

Reactã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®å…¨ã¦ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¾ã§å¾…æ©Ÿã—ã¦ã‹ã‚‰ã€çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ã“ã¨ã«æ°—ã‚’ä»˜ã‘ã¦ãã ã•ã„ã€‚åŒä¸€ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å†…ã«ãŠã„ã¦ã€çŠ¶æ…‹ã¯å›ºå®šã•ã‚Œã‚‹ã®ã§ã€ä¸Šè¨˜ã§ã¯çŠ¶æ…‹ãŒå¸¸ã«åŒã˜å€¤ã¨ãªã‚Šã¾ã™ã€‚

ã§ã¯æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã©ã†ã§ã—ã‚‡ã†ã‹ã€‚

```tsx
const Counter = () => {
  const [count, setCount] = useState(0)
  const handleClick = () => {
    setCount(count + 5);
    setTimeout(()=>{
      alert(count)
    }, 3000)
  }
  return (
    <button onClick={handleClick}>count: {count}</button>
  )
}
```

@[codesandbox](https://codesandbox.io/embed/react-snapshot-settimeout-wjjjwh?fontsize=14&hidenavigation=1&theme=dark)

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§`button`ã‚’1åº¦ã ã‘ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€`button`å†…ã®`count`ã¯ã™ã5ã«ãªã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€`alert(count)`ã§è¡¨ç¤ºã•ã‚Œã‚‹å€¤ã¯0ã§ã‚ã‚‹ã“ã¨ã«æ°—ãŒã¤ãã§ã—ã‚‡ã†ã€‚ã“ã‚Œã¯`alert(count)`ã«å¯¾ã—ã¦ã€çŠ¶æ…‹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãŒæ¸¡ã•ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼å†…ã®ã‚³ãƒ¼ãƒ‰ãŒãŸã¨ãˆéåŒæœŸå‡¦ç†ã§ã‚ã£ãŸã¨ã—ã¦ã‚‚ã€çŠ¶æ…‹ã¯ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ç‚¹ã«å›ºå®šã•ã‚Œã‚‹ã“ã¨ã‚’å¿˜ã‚Œã¦ã¯ã„ã‘ã¾ã›ã‚“ã€‚

## åŒä¸€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å†…ã§åŒã˜çŠ¶æ…‹ã‚’è¤‡æ•°å›æ›´æ–°ã™ã‚‹

> It is an uncommon use case, but if you would like to update the same state variable multiple times before the next render, instead of passing the next state value like setNumber(number + 1), you can pass a function that calculates the next state based on the previous one in the queue, like setNumber(n => n + 1). It is a way to tell React to â€œdo something with the state valueâ€ instead of just replacing it.
> å‡ºå…¸: [Updating the same state variable multiple times before the next render - Queueing a Series of State Updates â€¢ React](https://beta.reactjs.org/learn/queueing-a-series-of-state-updates#updating-the-same-state-variable-multiple-times-before-the-next-render)

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ *It is an uncommon use caseï¼ˆç¨€ãªä½¿ç”¨ä¾‹ï¼‰* ã¨ã¯æ›¸ã‹ã‚Œã¦ã„ã¾ã™ãŒã€Reactã§ã¯æ¬¡ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’å¾…ãŸãšã«åŒã˜çŠ¶æ…‹ã‚’è¤‡æ•°å›æ›´æ–°ã™ã‚‹æ–¹æ³•ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

```diff tsx
const Counter = () => {
  const [count, setCount] = useState(0)
  const handleClick = () => {
-    setCount(count + 1);
-    setCount(count + 1);
-    setCount(count + 1);
+    setCount(c => c + 1);
+    setCount(c => c + 1);
+    setCount(c => c + 1);
  }
  return (
    <button onClick={handleClick}>count: {count}</button>
  )
}
```

@[codesandbox](https://codesandbox.io/embed/react-snapshot-increment-3-vgykjp?fontsize=14&hidenavigation=1&theme=dark)

ä¸Šè¨˜ã®ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ›ãˆã¦`button`ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨`count`ãŒ3ãšã¤å¢—åŠ ã—ã¾ã™ã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯`c => c + 1`ã®éƒ¨åˆ†ã‚’æ›´æ–°é–¢æ•°ã¨å‘¼ã‚“ã§ã„ã¾ã™ãŒã€ã“ã®æ›´æ–°é–¢æ•°ã‚’`seté–¢æ•°`ã«æ¸¡ã™ã“ã¨ã§ã€åŒä¸€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å†…ã§ã‚‚ã€å‰ã®çŠ¶æ…‹ã«åŸºã¥ã„ãŸçŠ¶æ…‹ã®æ›´æ–°ã‚’ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯çŠ¶æ…‹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‹ã‚‰è¨ˆç®—ã—ãŸå€¤ã‚’`seté–¢æ•°`ã«æ¸¡ã™ä»£ã‚ã‚Šã«ã€çŠ¶æ…‹ã«ä¾å­˜ã—ãªã„æ›´æ–°é–¢æ•°ã‚’æ¸¡ã™ã“ã¨ã§Reactã«ã€ŒçŠ¶æ…‹å€¤ã‚’ã©ã®ã‚ˆã†ã«å¤‰æ›ã™ã‚‹ã‹ã€ã‚’æŒ‡ç¤ºã™ã‚‹æ–¹æ³•ã§ã™ã€‚

# ãŠã‚ã‚Šã«

æœ¬è¨˜äº‹ã§ã¯ *snapshotï¼ˆã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ)* ã¨ã„ã†å˜èªã«ç€ç›®ã—ã¤ã¤ã€Reactã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¨çŠ¶æ…‹ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚[React Docs](https://beta.reactjs.org)ã§ã¯å˜ã«Reactã®ä½¿ã„æ–¹ã‚’çŸ¥ã‚‹ã¨ã„ã†ã ã‘ã§ã¯ãªãã€ãã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ¢ãƒ‡ãƒ«ã«ã¤ã„ã¦ã‚‚å­¦ã¹ã‚‹ã“ã¨ãŒå¤šãã‚ã‚Šã¾ã™ã€‚ã¾ã èª­ã‚“ã ã“ã¨ãŒãªã„æ–¹ã¯æ˜¯éä¸€èª­ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

# å‚è€ƒ

https://beta.reactjs.org/learn/render-and-commit
https://beta.reactjs.org/learn/state-as-a-snapshot
https://beta.reactjs.org/learn/queueing-a-series-of-state-updates
