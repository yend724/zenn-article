---
title: "ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®äº’é™¤æ³•ã‚’Canvasã§å¯è¦–åŒ–ã™ã‚‹"
emoji: "ğŸ™†"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["math", "JavaScript", "TypeScript", "Canvas"]
published: true
---

# æ¦‚è¦

æœ€è¿‘Creative Codingã‚’å­¦ã³å§‹ã‚ã¾ã—ãŸã€‚ã¾ã ã¾ã åˆæ­©ã®åˆæ­©ãƒ¬ãƒ™ãƒ«ã§ã™ãŒã€æ•°å­¦çš„ãªæ€è€ƒã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€ãªã‹ãªã‹é ­ã®ä½“æ“ã«ãªã£ã¦æ¥½ã—ã„ã§ã™ã€‚

**ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®äº’é™¤æ³•**ã‚’å¯è¦–åŒ–ã™ã‚‹ã¨ãŠã‚‚ã—ã‚ã„ã‚‰ã—ã„ã¨ã„ã†ã“ã¨ã§ã€å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚

# ãƒ¦ãƒ¼ã‚°ãƒªãƒƒãƒˆã®äº’é™¤æ³•ã¨ã¯

å›°ã£ãŸã¨ãã®wikipediaã•ã‚“ã€‚

https://ja.wikipedia.org/w/index.php?curid=7942

> ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®äº’é™¤æ³•ï¼ˆãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®ã”ã˜ã‚‡ã»ã†ã€è‹±: Euclidean Algorithmï¼‰ã¯ã€2 ã¤ã®è‡ªç„¶æ•°ã®æœ€å¤§å…¬ç´„æ•°ã‚’æ±‚ã‚ã‚‹æ‰‹æ³•ã®ä¸€ã¤ã§ã‚ã‚‹ã€‚

ã“ã®é€šã‚Šã§ã™ã­ã€‚2ã¤ã®è‡ªç„¶æ•°ã‹ã‚‰æœ€å¤§å…¬ç´„æ•°ã‚’æ±‚ã‚ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ã“ã¨ã§ã™ã€‚

## æ‰‹é †

è‡ªç„¶æ•°a, b (a >= b)ã«å¯¾ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ‰‹é †ã‚’è¸ã¿ã¾ã™ã€‚

1. aã‚’bã§å‰²ã‚Šã€ä½™ã‚Šc1ã‚’æ±‚ã‚ã‚‹
2. bã‚’c1ã§å‰²ã‚Šã€ä½™ã‚Šc2ã‚’æ±‚ã‚ã‚‹
3. c1ã‚’c2ã§å‰²ã‚Šã€ä½™ã‚Šc3ã‚’æ±‚ã‚ã‚‹
4. ã“ã®æ“ä½œã‚’ä½™ã‚ŠãŒ0ã«ãªã‚‹ã¾ã§ç¹°ã‚Šè¿”ã—ã€ä½™ã‚ŠãŒ0ã«ãªã£ãŸæ™‚ã®**å‰²ã‚‹æ•°**ãŒæœ€å¤§å…¬ç´„æ•°ã¨ãªã‚‹

## å…·ä½“ä¾‹

è‡ªç„¶æ•°20ã¨12ã«å¯¾ã—ã¦ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®äº’é™¤æ³•ã‚’ã‚„ã£ã¦ã¿ã¾ã™ã€‚

```
20 Ã· 12 = 1 ... 8
12 Ã· 8 = 1 ... 4
8 Ã· 4 = 2 ... 0 //ä½™ã‚ŠãŒ 0 ã«ãªã£ãŸã®ã§çµ‚ã‚ã‚Š

ä½™ã‚ŠãŒ 0 ã«ãªã£ãŸæ™‚ã®å‰²ã‚‹æ•°ã¯ 4 ãªã®ã§æœ€å¤§å…¬ç´„æ•°ã¯ 4
```

ã‚„ã£ã¦ã¿ã‚‹ã¨ãã‚Œã»ã©é›£ã—ãã¯ã‚ã‚Šã¾ã›ã‚“ã­ã€‚

# TypeScriptã«ç½®ãæ›ãˆã‚‹

ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®äº’é™¤æ³•ã‚’`TypeScript`ã§è¡¨ç¾ã—ã¦ã¿ã¾ã™ã€‚

```ts
// è‡ªç„¶æ•°ã€€a, b(a > b)ã‚’æº–å‚™
let a = 20;
let b = 12;

while (b > 0) {
  const c = Math.floor(a / b); // å•†
  const d = a % b; // ä½™ã‚Š
  console.log(a + "Ã·" + b + "=" + c + "..." + d);
  a = b;
  b = d;
}

/*
å®Ÿè¡Œçµæœ
20Ã·12=1...8
12Ã·8=1...4
8Ã·4=2...0
*/
```

å®Œç’§ã§ã™ã­ã€‚

# å›³å½¢çš„ã«è€ƒãˆã¦ã¿ã‚‹

ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®äº’é™¤æ³•ã‚’å›³å½¢çš„ã«è€ƒãˆã¦ã¿ã¾ã™ã€‚

```
a Ã· b = c ... d ãŒä½•ã‚’è¡¨ã—ã¦ã„ã‚‹ã®ã‹

é•·è¾ºã®é•·ã•ã‚’a
çŸ­è¾ºã®é•·ã•ã‚’b
ã¨ã—ãŸé•·æ–¹å½¢ã‚’è€ƒãˆã‚‹

é•·æ–¹å½¢ã‹ã‚‰ä¸€è¾ºã®é•·ã•ãŒbã§ã‚ã‚‹æ­£æ–¹å½¢ã‚’cå€‹åŸ‹ã‚ã‚‹ã¨ã€
é•·è¾ºãŒb, çŸ­è¾ºãŒdã®é•·æ–¹å½¢ãŒæ®‹ã‚‹
```

å›³ã«æ›¸ã„ã¦ã¿ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ã€‚

![ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®äº’é™¤æ³•å›³è§£](/images/20211116/euclidean-algorithm.png)

æ®‹ã£ãŸé•·æ–¹å½¢ã«å¯¾ã—ã¦ã€ã¾ãŸåŒã˜ã“ã¨ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ãã¨ã€ã„ãšã‚Œä½™ã‚Šï¼ˆä¸Šè¨˜ç”»åƒã®dï¼‰ãŒ0ã«ãªã‚‹ã®ã§ã€ã™ã¹ã¦ãŒæ­£æ–¹å½¢ã§åŸ‹ã¾ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã­ã€‚

ã™ãªã‚ã¡ã€ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®äº’é™¤æ³•ã‚’ä½¿ã†ã“ã¨ã«ã‚ˆã£ã¦**é•·æ–¹å½¢ã‚’æ­£æ–¹å½¢ã«åˆ†å‰²ã§ãã‚‹**ã¨ã„ã†ã“ã¨ã§ã™ã€‚

# Canvasã«æå†™ã™ã‚‹

ã“ã“ã¾ã§ãã‚Œã°ã‚ã¨ã¯Canvasã«æå†™ã—ã¦ã¿ã‚‹ã ã‘ã§ã™ã­ã€‚

@[codepen](https://codepen.io/yend24/pen/RwZXMWY)

:::details TypeScriptã‚³ãƒ¼ãƒ‰

```ts
const canvas = document.getElementById("canvas") as HTMLCanvasElement;
const context = canvas.getContext("2d")!;

let n1 = 56; // è‡ªç„¶æ•°ï¼ˆå¤§ãã„ï¼‰
let n2 = 36; // è‡ªç„¶æ•°(å°ã•ã„)
const scale = Math.floor((window.innerWidth / n1) * 0.8); // é•·æ–¹å½¢ã®å¤§ãã•ã‚’æ±ºã‚ã‚‹ãŸã‚ã®ä¿‚æ•°ã€‚windowã®æ¨ªå¹…ã®0.8å€ã«èª¿æ•´
n1 = n1 * scale;
n2 = n2 * scale;

canvas.width = n1;
canvas.height = n2;
context.fillStyle = "#ccc";
context.fillRect(0, 0, n1, n2);

let a = n1;
let b = n2;

let posX = 0,
  posY = 0;

let count = 0; //æ¨ªã«åˆ†å‰²ã™ã‚‹ã‹ç¸¦ã«åˆ†å‰²ã™ã‚‹ã‹æ±ºã‚ã‚‹ãŸã‚ã®ã‚«ã‚¦ãƒ³ã‚¿
while (b > 0) {
  const c = Math.floor(a / b); // å•†
  const d = a % b; // ä½™ã‚Š
  // å•†ã®æ•°ã ã‘æ­£æ–¹å½¢ãŒå–å¾—ã§ãã‚‹
  for (let i = 0; i < c; i++) {
    context.fillStyle = `rgb(${Math.floor(Math.random() * 256)},${Math.floor(
      Math.random() * 256
    )},${Math.floor(Math.random() * 256)})`;
    context.fillRect(posX, posY, b, b);
    if (count % 2 === 0) {
      // countã€€ãŒã€€2ã€€ã§å‰²ã‚Šåˆ‡ã‚Œã‚‹æ™‚ã¯æ¨ªã«åˆ†å‰²
      posX += b;
    } else {
      // countã€€ãŒã€€2ã€€ã§å‰²ã‚Šåˆ‡ã‚Œãªã„æ™‚ã¯ç¸¦ã«åˆ†å‰²
      posY += b;
    }
  }
  a = b;
  b = d;
  count++;
}
```

:::

ç¶ºéº—ã«é•·æ–¹å½¢ã‚’æ­£æ–¹å½¢ã§åˆ†å‰²ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

# ã¾ã¨ã‚

ãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰ã®äº’é™¤æ³•ã‚’å¯è¦–åŒ–ã™ã‚‹æ–¹æ³•ã§ã—ãŸã€‚åŸºç¤ä¸­ã®åŸºç¤ã§ã¯ã‚ã‚Šã¾ã™ãŒã€æ•°å­¦ã®åŠ›ã‚’å€Ÿã‚Šã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ãŠã‚‚ã—ã‚ã„è¡¨ç¾ãŒã§ãã‚‹ã®ã ãªã¨æ„Ÿå‹•ã—ã¾ã—ãŸã€‚Creative Codingã‚„æ•°å­¦ã‚’å­¦ã‚“ã§ã„ãã“ã¨ã«ã‚ˆã£ã¦ã€ã‚ˆã‚ŠãŠã‚‚ã—ã‚ã„è¡¨ç¾ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚
